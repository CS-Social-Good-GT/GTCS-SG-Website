"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createSortableList = createSortableList;
exports.createSortableItem = createSortableItem;
exports.createDragHandle = createDragHandle;

var _react = _interopRequireDefault(require("react"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _reactSortableHoc = require("react-sortable-hoc");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var ValidAxis = _propTypes.default.oneOf(['x', 'y', 'xy']);

function createSortableList(element) {
  var _class, _temp;

  // Delegate to SortableContainer from react-sortable-hoc
  var Sortable = (0, _reactSortableHoc.SortableContainer)(element);
  return _temp = _class = class SortableList extends _react.default.Component {
    constructor() {
      super(...arguments);

      _defineProperty(this, "handleSortStart", (_ignore
      /*{node, index, collection}*/
      , event) => {
        var onSortStart = this.props.onSortStart;
        event.preventDefault();

        if (onSortStart) {
          onSortStart();
        }
      });
    }

    render() {
      var _this$props = this.props,
          movingItemClass = _this$props.movingItemClass,
          distance = _this$props.distance,
          useDragHandle = _this$props.useDragHandle,
          lockToContainerEdges = _this$props.lockToContainerEdges,
          axis = _this$props.axis,
          lockAxis = _this$props.lockAxis,
          transitionDuration = _this$props.transitionDuration,
          onSortStart = _this$props.onSortStart,
          onSortEnd = _this$props.onSortEnd,
          onSort = _this$props.onSort,
          helperClass = _this$props.helperClass,
          pressDelay = _this$props.pressDelay,
          pressThreshold = _this$props.pressThreshold,
          shouldCancelStart = _this$props.shouldCancelStart,
          onSortMove = _this$props.onSortMove,
          useWindowAsScrollContainer = _this$props.useWindowAsScrollContainer,
          hideSortableGhost = _this$props.hideSortableGhost,
          lockOffset = _this$props.lockOffset,
          getContainer = _this$props.getContainer,
          getHelperDimensions = _this$props.getHelperDimensions,
          rest = _objectWithoutProperties(_this$props, ["movingItemClass", "distance", "useDragHandle", "lockToContainerEdges", "axis", "lockAxis", "transitionDuration", "onSortStart", "onSortEnd", "onSort", "helperClass", "pressDelay", "pressThreshold", "shouldCancelStart", "onSortMove", "useWindowAsScrollContainer", "hideSortableGhost", "lockOffset", "getContainer", "getHelperDimensions"]);

      return /*#__PURE__*/_react.default.createElement(Sortable, _extends({}, rest, {
        onSortStart: this.handleSortStart,
        onSortEnd: onSortEnd,
        distance: distance,
        helperClass: movingItemClass,
        lockToContainerEdges: lockToContainerEdges,
        transitionDuration: transitionDuration,
        axis: axis,
        lockAxis: lockAxis,
        useDragHandle: useDragHandle
      }));
    }

  }, _defineProperty(_class, "propTypes", {
    className: _propTypes.default.string,
    movingItemClass: _propTypes.default.string,
    useDragHandle: _propTypes.default.bool,
    onSortEnd: _propTypes.default.func,
    //(event: {oldIndex: number; newIndex: number}) => void
    onSortStart: _propTypes.default.func,
    //() => void
    distance: _propTypes.default.number,
    lockToContainerEdges: _propTypes.default.bool,
    transitionDuration: _propTypes.default.number,
    axis: ValidAxis,
    lockAxis: ValidAxis
  }), _temp;
}

function createSortableItem(element) {
  var Sortable = (0, _reactSortableHoc.SortableElement)(element); // Delegate to SortableElement from react-sortable-hoc

  function SortableItem(props) {
    var collection = props.collection,
        disabled = props.disabled,
        index = props.index,
        rest = _objectWithoutProperties(props, ["collection", "disabled", "index"]);

    return /*#__PURE__*/_react.default.createElement(Sortable, _extends({
      index: index
    }, rest));
  }

  SortableItem.proTypes = {
    collection: _propTypes.default.number,
    disabled: _propTypes.default.boolean
  };
  return SortableItem;
}

function createDragHandle(element) {
  return (0, _reactSortableHoc.SortableHandle)(element);
}